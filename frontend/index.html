<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ChartMaster AI - Professional Chart Analysis with AI</title>
    <meta name="description" content="Turn your trading charts into professional analysis. AI-powered trading recommendations in seconds.">
    
    <!-- Paddle JS -->
    <script src="https://cdn.paddle.com/paddle/v2/paddle.js"></script>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="/" class="logo">
                <span class="logo-icon">ğŸ“ˆ</span>
                <span>ChartMaster</span>
                <span class="logo-ai">AI</span>
            </a>
            <nav class="nav-menu">
                <a href="#demo" class="nav-link">Try it</a>
                <a href="#how-it-works" class="nav-link">How it works</a>
                <a href="#use-cases" class="nav-link">Use cases</a>
                <a href="#pricing" class="nav-link">Pricing</a>
                <a href="#faq" class="nav-link">FAQ</a>
            </nav>
            <div class="nav-buttons">
                <a href="/login" class="login-btn">Login</a>
                <a href="#" class="cta-btn" onclick="showUpgradeModal(); return false;">
                    <span>ğŸš€</span>
                    Get ChartMaster +
                </a>
            </div>
        </div>
    </header>

    <!-- Hero Section with Demo -->
<section class="hero-with-demo">
    <div class="hero-demo-container">
        <!-- Left Side - Hero Content -->
        <div class="hero-content">
            <div class="product-badge">
                <span>ğŸ“ˆ</span>
                Product of the day
                <span>1st</span>
            </div>
            
            <h1>
                Never Analyze Charts Wrong Again,<br>
                <span class="hero-highlight">There's an AI for that.</span>
            </h1>
            
            <p class="hero-subtitle">Try ChartMaster free for 7 days</p>
            
            <p class="hero-description">
                Join thousands of professionals who use AI chart analysis to save time, 
                make better trading decisions and maximize profits with accurate technical analysis.
                Available on Web, iOS and Android.
            </p>
            
            <div class="trust-badges">
                <span>Works in:</span>
                <div class="language-badges">
                    <span class="language-badge">ğŸ‡ºğŸ‡¸ US Markets</span>
                    <span class="language-badge">ğŸ‡ªğŸ‡º EU Markets</span>
                    <span class="language-badge">ğŸ’± Forex</span>
                    <span class="language-badge">ğŸ‡©ğŸ‡ª DAX</span>
                    <span class="language-badge">ğŸª™ Crypto</span>
                </div>
            </div>

            <a href="#pricing" class="main-cta">
                <span>â†’</span>
                Try ChartMaster free for 7 days
            </a>

            <div class="rating">
                <span>Trusted by +10,000 happy traders</span>
                <span class="stars">â­â­â­â­â­</span>
            </div>

            <div class="app-buttons">
                <a href="#" class="app-button">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/3/3c/Download_on_the_App_Store_Badge.svg" alt="App Store">
                </a>
                <a href="#" class="app-button">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Google Play">
                </a>
            </div>

            <!-- Social Proof -->
            <div class="social-proof-inline">
                <span>Medium</span>
                <span>INDIE HACKERS</span>
                <span>Foundr</span>
                <span>Scoop.it!</span>
            </div>
        </div>

        <!-- Right Side - Interactive Demo -->
<div class="demo-panel" id="demo">
    <div class="demo-header">
        <h3 class="demo-title">
            <span class="demo-icon">ğŸ“Š</span>
            Free Chart Analysis Demo
        </h3>
    </div>
    
    <div class="demo-interface-compact">
        <div id="demoContent">
            <!-- Upload State -->
            <div class="upload-state">
                <div class="upload-icon-large">ğŸ“ˆ</div>
                <h4 class="upload-title">Try AI Chart Analysis</h4>
                <p class="upload-subtitle">Upload any trading chart and get instant AI-powered analysis</p>
                
                <button class="upload-main-btn" onclick="document.getElementById('demoChartInput').click()">
                    <span class="btn-icon">ğŸ“Š</span>
                    Upload Chart Image
                </button>
                
                <div class="upload-divider">
                    <span>or</span>
                </div>
                
                <div class="upload-actions">
                    <button class="upload-action-btn" onclick="document.getElementById('demoChartInput').click()">
                        <span>ğŸ“·</span>
                        Take Photo
                    </button>
                    <button class="upload-action-btn" onclick="document.getElementById('demoChartInput').click()">
                        <span>ğŸ“</span>
                        Browse Files
                    </button>
                </div>
                
                <div class="upload-info" id="uploadInfo">
                    <div class="scan-counter-inline">
                        <span class="counter-icon">ğŸ¯</span>
                        <span class="counter-text">Free Scans Remaining:</span>
                        <span class="counter-number" id="scansRemaining">2/2</span>
                    </div>
                </div>
            </div>
            
            <input type="file" id="demoChartInput" accept="image/*" style="display: none;" onchange="handleDemoChartUpload(event)">
        </div>
        
        <!-- Loading state (hidden) -->
        <div id="loadingState" style="display: none;">
            <div class="analysis-loading">
                <div class="loading-animation">
                    <div class="chart-scan-animation">
                        <div class="scan-line"></div>
                        <div class="chart-icon">ğŸ“Š</div>
                    </div>
                </div>
                <h3 class="loading-title">Analyzing Your Chart</h3>
                <p class="loading-message" id="loadingMessage">Detecting patterns...</p>
                <div class="loading-steps">
                    <div class="step-item active">
                        <span class="step-icon">ğŸ”</span>
                        <span>Scanning</span>
                    </div>
                    <div class="step-item">
                        <span class="step-icon">ğŸ“</span>
                        <span>Patterns</span>
                    </div>
                    <div class="step-item">
                        <span class="step-icon">ğŸ“Š</span>
                        <span>Analysis</span>
                    </div>
                    <div class="step-item">
                        <span class="step-icon">ğŸ’¡</span>
                        <span>Results</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Result state (hidden) -->
        <div id="resultState" style="display: none;">
            <div class="analysis-results">
                <div class="result-header">
                    <h4>Analysis Complete</h4>
                    <button class="new-analysis-btn" onclick="resetDemo()">
                        <span>ğŸ”„</span>
                        New Analysis
                    </button>
                </div>
                
                <div class="sentiment-card" id="sentimentCard">
                    <div class="sentiment-indicator">
                        <span class="sentiment-icon" id="sentimentIcon">ğŸ“ˆ</span>
                        <div class="sentiment-details">
                            <span class="sentiment-label">Market Sentiment</span>
                            <span class="sentiment-value" id="sentimentText">BULLISH</span>
                        </div>
                    </div>
                    <div class="confidence-meter">
                        <div class="confidence-bar">
                            <div class="confidence-fill" id="confidenceFill" style="width: 87%"></div>
                        </div>
                        <span class="confidence-text" id="confidenceText">87% Confidence</span>
                    </div>
                </div>
                
                <div class="analysis-details">
                    <div class="detail-section">
                        <h5>
                            <span class="section-icon">ğŸ’¡</span>
                            Recommendation
                        </h5>
                        <p id="recommendationText" class="recommendation-text"></p>
                    </div>
                    
                    <div class="detail-section">
                        <h5>
                            <span class="section-icon">ğŸ“‹</span>
                            Technical Analysis
                        </h5>
                        <p id="analysisText" class="analysis-text"></p>
                    </div>
                    
                    <div id="patternsSection" class="detail-section" style="display: none;">
                        <h5>
                            <span class="section-icon">ğŸ“</span>
                            Detected Patterns
                        </h5>
                        <div id="patternsList" class="patterns-list"></div>
                    </div>

                    <!-- NEW: Key Levels Section -->
                    <div id="levelsSection" class="detail-section" style="display: none;">
                        <h5>
                            <span class="section-icon">ğŸ“</span>
                            Key Price Levels
                        </h5>
                        <div id="keyLevelsList" class="key-levels-container"></div>
                    </div>
                </div>
                
                <div class="result-actions">
                    <button class="action-btn primary" onclick="resetDemo()">
                        <span>ğŸ“Š</span>
                        Analyze Another Chart
                    </button>
                    <button class="action-btn secondary" onclick="window.location.href='#pricing'">
                        <span>ğŸš€</span>
                        Get Full Version
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Chart info inputs (hidden) -->
        <div id="chartInfoInputs" style="display: none;">
            <div class="chart-preview-section">
                <img id="previewImage" class="preview-image-compact">
                <button class="change-image-btn" onclick="document.getElementById('demoChartInput').click()">
                    Change Image
                </button>
            </div>
            
            <div class="input-section">
                <h4>Enhance Your Analysis (Optional)</h4>
                <input type="text" id="symbolInput" placeholder="Symbol/Asset (e.g., BTC/USD)" class="analysis-input">
                <input type="text" id="timeframeInput" placeholder="Timeframe (e.g., 4H, 1D)" class="analysis-input">
                <textarea id="notesInput" placeholder="Any specific patterns or levels to analyze?" class="analysis-input analysis-textarea"></textarea>
                
                <!-- NEW: Analysis Style Selection -->
                <select id="analysisStyleInput" class="analysis-input">
                    <option value="technical">Technical Analysis</option>
                    <option value="price-action">Price Action</option>
                    <option value="elliott-wave">Elliott Wave</option>
                    <option value="fibonacci">Fibonacci</option>
                    <option value="signal">Trading Signal</option>
                </select>
            </div>
            
            <button class="analyze-main-btn" onclick="analyzeChart()">
                <span class="btn-icon">ğŸ¤–</span>
                Start AI Analysis
                <span class="btn-arrow">â†’</span>
            </button>
        </div>
    </div>
    
    <div class="demo-footer">
        <p class="demo-footer-text">
            <span class="footer-icon">ğŸ”’</span>
            No signup required â€¢ 100% Free Demo
        </p>
    </div>
</div>
    </div>
</section>

    <!-- Social Proof -->
    <div class="social-proof">
        <span>Medium</span>
        <span>INDIE HACKERS</span>
        <span>Foundr</span>
        <span>Scoop.it!</span>
    </div>

    <!-- Why Choose Section -->
    <section class="why-section">
        <p class="section-title">Why Choose ChartMaster?</p>
        <h2 class="section-heading">Work with AI by Your Side, Every Trade of the Way</h2>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">â±ï¸</div>
                <h3 class="feature-title">Save Time</h3>
                <p class="feature-description">
                    Focus on what matters. Let AI handle the busywork of chart analysis so you 
                    can reclaim your time and dedicate it to high-impact trades.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ“ˆ</div>
                <h3 class="feature-title">Get More Done</h3>
                <p class="feature-description">
                    Boost your trading productivity. Capture insights quickly, stay on top of your markets, 
                    and move through opportunities with greater efficiency.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ¯</div>
                <h3 class="feature-title">Work Smart, Not Hard</h3>
                <p class="feature-description">
                    Leverage AI for effortless market analysis. ChartMaster makes it easy to stay productive 
                    and efficient without the hassle of manual chart analysis.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸš€</div>
                <h3 class="feature-title">Get Ahead Instead of Left Behind</h3>
                <p class="feature-description">
                    Stay competitive in an AI-driven world. Using AI isn't optional â€” it's essential. 
                    Keep pace with modern tools to maintain your edge.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ“±</div>
                <h3 class="feature-title">Stay Organized</h3>
                <p class="feature-description">
                    Turn chaos into clarity. With customizable templates and automatic structuring, 
                    ChartMaster ensures that every analysis is right where you need it.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ”’</div>
                <h3 class="feature-title">Never Miss a Thing</h3>
                <p class="feature-description">
                    Capture every idea, every detail. ChartMaster helps you avoid information overload 
                    by keeping all your thoughts organized and accessible.
                </p>
            </div>
        </div>
    </section>

    <!-- Testimonial -->
    <div class="testimonial">
        <p class="testimonial-content">
            "This app has great practical use. Whether you're brainstorming ideas for day trading, 
            processing your swing trades, or long-term investing, this captured all of it and puts 
            it into whatever format you want. SUPER clean and easy to use. The developer has been 
            a great innovator & we're grateful for this service."
        </p>
        <div class="testimonial-author">
            <div class="author-avatar">
                <img src="https://via.placeholder.com/48" alt="Testimonial">
            </div>
            <div class="author-info">
                <div class="author-name">- Michael Chen, review on Apple App Store</div>
            </div>
        </div>
    </div>

    <!-- How it Works -->
    <section class="how-section" id="how-it-works">
        <p class="section-title">How it works</p>
        <h2 class="section-heading">Analyze Charts in Seconds, Stay Ahead for Hours</h2>
        
        <div class="steps-container">
            <div class="step active" onclick="toggleStep(this)">
                <div class="step-header">
                    <h3 class="step-title">
                        <span class="step-number">1.</span>
                        Upload Chart with One Button
                    </h3>
                    <span class="step-icon">Ã—</span>
                </div>
                <div class="step-content">
                    <p>Effortlessly capture your charts with a single tap. Start uploading instantly 
                    and let ChartMaster run in the background, so you can stay focused on what 
                    matters without interruptions.</p>
                    <div class="step-preview">
                        <div class="phone-mockup">
                            <div class="timer">20:00</div>
                            <div class="control-buttons">
                                <button class="control-btn">â–¶</button>
                                <button class="control-btn active">ğŸ“Š</button>
                                <button class="control-btn">â–¡</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="step" onclick="toggleStep(this)">
                <div class="step-header">
                    <h3 class="step-title">
                        <span class="step-number">2.</span>
                        Select Your Style
                    </h3>
                    <span class="step-icon">+</span>
                </div>
                <div class="step-content">
                    <p>Choose from various analysis styles like Technical Analysis, Price Action, 
                    Fibonacci, Elliott Waves, or create your own custom style to match your 
                    trading strategy perfectly.</p>
                </div>
            </div>
            
            <div class="step" onclick="toggleStep(this)">
                <div class="step-header">
                    <h3 class="step-title">
                        <span class="step-number">3.</span>
                        Analyze & Summarize with 99% Accuracy
                    </h3>
                    <span class="step-icon">+</span>
                </div>
                <div class="step-content">
                    <p>Our advanced AI analyzes your charts with exceptional precision, identifying 
                    patterns, trends, support/resistance levels, and generating clear trading 
                    recommendations based on proven strategies.</p>
                </div>
            </div>
            
            <div class="step" onclick="toggleStep(this)">
                <div class="step-header">
                    <h3 class="step-title">
                        <span class="step-number">4.</span>
                        Edit, then Share & Export Analysis Easily
                    </h3>
                    <span class="step-icon">+</span>
                </div>
                <div class="step-content">
                    <p>Refine your analyses, share them with your team, or export them in various 
                    formats. Track your trading performance and optimize your strategies based 
                    on AI insights.</p>
                </div>
            </div>
        </div>

        <a href="#pricing" class="section-cta">
            <span>â†’</span>
            Try ChartMaster free for 7 days
        </a>
    </section>

    <!-- Testimonials -->
    <section class="testimonials-section">
        <div class="testimonials-grid">
            <div class="testimonial-card">
                <p class="testimonial-text">
                    "So simple, yet effective. I use ChartMaster to analyze most of our trading 
                    charts. I would highly recommend to those looking to save time on their 
                    technical analysis."
                </p>
                <div class="testimonial-footer">
                    <img src="https://via.placeholder.com/40" alt="Author">
                    <span>- David Johnson, from Trustpilot</span>
                </div>
            </div>
            
            <div class="testimonial-card">
                <p class="testimonial-text">
                    "This is really helpful for analyzing charts on the fly. The app is user 
                    friendly, easy to use, and does exactly as advertised."
                </p>
                <div class="testimonial-footer">
                    <img src="https://via.placeholder.com/40" alt="Author">
                    <span>- Sarah Williams, review from Product Hunt</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Use Cases -->
    <section class="use-cases-section" id="use-cases">
        <p class="section-title">Use cases</p>
        <h2 class="section-heading">Here is how ChartMaster can help you</h2>
        
        <div class="use-cases-grid">
            <div class="use-case-card">
                <div class="use-case-icon">ğŸ’¡</div>
                <h3 class="use-case-title">Effortless Day Trading</h3>
                <p class="use-case-description">
                    Never forget a trading idea again! Capture your best thoughts while they're fresh, 
                    and let our app do the analysis for you.
                </p>
            </div>
            
            <div class="use-case-card">
                <div class="use-case-icon">ğŸ–Šï¸</div>
                <h3 class="use-case-title">Easy Market Analysis</h3>
                <p class="use-case-description">
                    Say goodbye to hours of chart analysis. With ChartMaster, you can upload your 
                    charts and watch them transform into actionable insights in seconds.
                </p>
            </div>
            
            <div class="use-case-card">
                <div class="use-case-icon">ğŸ““</div>
                <h3 class="use-case-title">Trading Journal</h3>
                <p class="use-case-description">
                    Discover a new way to journal! Express your thoughts, feelings, and memories 
                    effortlessly just by uploading your trades.
                </p>
            </div>
            
            <div class="use-case-card">
                <div class="use-case-icon">ğŸ™ï¸</div>
                <h3 class="use-case-title">Strategy Development</h3>
                <p class="use-case-description">
                    Develop trading strategies like a pro! ChartMaster provides instant, accurate 
                    analysis so you can focus on building profitable strategies.
                </p>
            </div>
            
            <div class="use-case-card">
                <div class="use-case-icon">ğŸ¢</div>
                <h3 class="use-case-title">Team Collaboration</h3>
                <p class="use-case-description">
                    Transform your team meetings with ChartMaster! Record, analyze, and never 
                    miss crucial market insights again.
                </p>
            </div>
            
            <div class="use-case-card">
                <div class="use-case-icon">ğŸ“</div>
                <h3 class="use-case-title">Learn Faster</h3>
                <p class="use-case-description">
                    Supercharge your trading education with ChartMaster! Convert lessons and 
                    webinars into clear notes and flashcards.
                </p>
            </div>
        </div>

        <a href="#pricing" class="section-cta">
            <span>â†’</span>
            Try ChartMaster free for 7 days
        </a>
    </section>

    <!-- Testimonials 2 -->
    <section class="testimonials-section">
        <div class="testimonials-grid">
            <div class="testimonial-card">
                <p class="testimonial-text">
                    "The quality of the analysis is fantastic and requires virtually no rework. 
                    Compared to incomparably more expensive tools, the results are dimensions better."
                </p>
                <div class="testimonial-footer">
                    <img src="https://via.placeholder.com/40" alt="Author">
                    <span>- Thomas Mueller, from TradingCommunity</span>
                </div>
            </div>
            
            <div class="testimonial-card">
                <p class="testimonial-text">
                    "I've started using ChartMaster for my work and it has helped me save a lot 
                    of time. The app is very user friendly, easy to use, and very accurate. 
                    I rarely have to correct things and it's very simple to use."
                </p>
                <div class="testimonial-footer">
                    <img src="https://via.placeholder.com/40" alt="Author">
                    <span>- Lisa Chen, review on Apple App Store</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Styles Section -->
    <section class="styles-section">
        <p class="section-title">+100 premade styles to pick from</p>
        <p class="styles-subtitle">
            Boost your productivity with styles for every need. From trend analysis to detailed 
            technical reports, ChartMaster helps you turn ideas into action!
        </p>
        
        <div class="styles-grid">
            <div class="style-card">
                <div class="style-icon">ğŸ“</div>
                <h4 class="style-title">Trading Signal</h4>
                <p class="style-description">
                    Transform chart patterns into clear trading signals with entry, 
                    stop-loss and take-profit levels.
                </p>
            </div>
            
            <div class="style-card">
                <div class="style-icon">ğŸ¬</div>
                <h4 class="style-title">Market Update</h4>
                <p class="style-description">
                    Organize market updates into structured reports for your followers 
                    or team members.
                </p>
            </div>
            
            <div class="style-card">
                <div class="style-icon">ğŸ“§</div>
                <h4 class="style-title">Newsletter</h4>
                <p class="style-description">
                    Turn market analysis into a newsletter, with a friendly and engaging tone.
                </p>
            </div>
            
            <div class="style-card">
                <div class="style-icon">ğŸ’¼</div>
                <h4 class="style-title">Portfolio Report</h4>
                <p class="style-description">
                    Turn chart analysis into a professional portfolio report with 
                    performance metrics.
                </p>
            </div>
            
            <div class="style-card">
                <div class="style-icon">ğŸ“Š</div>
                <h4 class="style-title">Technical Analysis</h4>
                <p class="style-description">
                    Create detailed technical analysis with all important indicators 
                    and patterns identified.
                </p>
            </div>
            
            <div class="style-card">
                <div class="style-icon">ğŸ“</div>
                <h4 class="style-title">Trading Plan</h4>
                <p class="style-description">
                    Develop structured trading plans with clear rules, entry/exit 
                    points and risk management.
                </p>
            </div>
            
            <div class="style-card">
                <div class="style-icon">âœ…</div>
                <h4 class="style-title">Task List</h4>
                <p class="style-description">
                    Convert trading rules into a task list, using "-" for tasks 
                    without numbers.
                </p>
            </div>
            
            <div class="style-card">
                <div class="style-icon">ğŸ¦</div>
                <h4 class="style-title">Tweet</h4>
                <p class="style-description">
                    Create a short tweet from market observations, keeping it casual 
                    and friendly.
                </p>
            </div>
            
            <div class="style-card">
                <div class="style-icon">ğŸ™ï¸</div>
                <h4 class="style-title">Podcast Script</h4>
                <p class="style-description">
                    Create detailed scripts for trading podcasts from market analysis.
                </p>
            </div>
            
            <div class="style-card">
                <div class="style-icon">ğŸ“‹</div>
                <h4 class="style-title">Blog post planner</h4>
                <p class="style-description">
                    Organize the main ideas in your analysis into multiple blog post outlines.
                </p>
            </div>
            
            <div class="style-card">
                <div class="style-icon">And more...</div>
                <h4 class="style-title">And more...</h4>
                <p class="style-description">
                    We add new styles frequently, and you can even create your own!
                </p>
            </div>
        </div>
        
        <div class="custom-style-cta">
            <h3>...or create your own!</h3>
            <p>Can't find the perfect style or need something very specific? Give your own 
            instructions for the AI to follow in just a few clicks. Your creativity is the only limit!</p>
            <div class="custom-style-preview">
                <img src="https://via.placeholder.com/600x400" alt="Custom style preview">
            </div>
        </div>

        <a href="#pricing" class="section-cta">
            <span>â†’</span>
            Try ChartMaster free for 7 days
        </a>
    </section>

    <!-- Share & Export -->
    <section class="export-section">
        <p class="section-title">Share & Export</p>
        <h2 class="section-heading">Turn your analysis into actionable trades</h2>
        
        <div class="integrations">
            <div class="integration-group">
                <div class="integration-icons">
                    <img src="https://via.placeholder.com/150x50" alt="Zapier">
                </div>
                <h3 class="integration-title">Send it to 1000s of other apps</h3>
                <p class="integration-description">
                    Connect ChartMaster to your favorite trading apps with Zapier or Webhooks! 
                    Perfect to automate publishing and workflows!
                </p>
            </div>
            
            <div class="integration-group">
                <div class="integration-icons">
                    <span class="format-icon">Mâ†“</span>
                    <span class="format-icon pdf">PDF</span>
                    <span class="format-icon">TXT</span>
                </div>
                <h3 class="integration-title">Export in PDF, Text or Markdown</h3>
                <p class="integration-description">
                    Export your analysis in PDF, Text or Markdown to use them in your favorite tools.
                </p>
            </div>
            
            <div class="integration-group">
                <div class="integration-icons">
                    <span class="link-icon">ğŸ”—</span>
                </div>
                <h3 class="integration-title">Publish with just a link!</h3>
                <p class="integration-description">
                    Need to share an analysis quickly? Make it public and share with the world 
                    via a simple link!
                </p>
            </div>
        </div>
    </section>

    <!-- Additional CTA -->
    <div class="cta-section">
        <a href="#pricing" class="main-cta">
            <span>â†’</span>
            Try ChartMaster free for 7 days
        </a>
    </div>

    <!-- More Testimonials -->
    <section class="testimonials-section">
        <div class="testimonials-grid">
            <div class="testimonial-card">
                <p class="testimonial-text">
                    "Absolutely love ChartMaster. I have wrist pain so being able to dictate 
                    my analysis not only saves me time but relieves my pain! Win win. 
                    Highly recommend!"
                </p>
                <div class="testimonial-footer">
                    <img src="https://via.placeholder.com/40" alt="Author">
                    <span>- Emma Davis, from Product Hunt</span>
                </div>
            </div>
            
            <div class="testimonial-card">
                <p class="testimonial-text">
                    "The quality of the analysis is fantastic and requires virtually no rework. 
                    Compared to incomparably more expensive tools, the results are dimensions better."
                </p>
                <div class="testimonial-footer">
                    <img src="https://via.placeholder.com/40" alt="Author">
                    <span>- Robert Smith, from TradingCommunity</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
<section class="pricing-section" id="pricing">
    <p class="section-title">Pricing</p>
    <h2 class="section-heading">Start Your 3 Day Free Trial</h2>
    <p class="pricing-subtitle">
        Get ChartMaster: <strong class="gradient-text">ALL FEATURES</strong>
    </p>
    
    <div class="pricing-cards">
        <div class="pricing-card">
            <h3 class="plan-name">Monthly</h3>
            <p class="plan-subtitle">Try 3 days free then $19.97/month</p>
            <div class="plan-price">
                $19.97
                <span>/month</span>
            </div>
            <ul class="plan-features">
                <li><span class="check">âœ“</span> iOS and Android app</li>
                <li><span class="check">âœ“</span> Unlimited analyses</li>
                <li><span class="check">âœ“</span> 2h recording</li>
                <li><span class="check">âœ“</span> Upload files</li>
                <li><span class="check">âœ“</span> Custom styles</li>
                <li><span class="check">âœ“</span> Export to text, mail, URL etc</li>
                <li><span class="check">âœ“</span> Store and organize your analyses</li>
            </ul>
            <button class="plan-cta-gradient" onclick="event.preventDefault(); startDirectCheckout('monthly')">
                <span>â†’</span>
                Try 3 Days Free
            </button>
            <div class="secure-payment">
                <span>ğŸ”’</span>
                Secure payment via Paddle
            </div>
        </div>
        
        <div class="pricing-card featured">
            <div class="best-value-badge">BEST VALUE</div>
            <h3 class="plan-name">Yearly</h3>
            <p class="plan-subtitle">Try 3 days free then $16/month</p>
            <div class="plan-price">
                $197
                <span>/year</span>
            </div>
            <div class="savings-badge">Save $43 per year!</div>
            <ul class="plan-features">
                <li><span class="check">âœ“</span> iOS and Android app</li>
                <li><span class="check">âœ“</span> Unlimited analyses</li>
                <li><span class="check">âœ“</span> 2h recording</li>
                <li><span class="check">âœ“</span> Upload files</li>
                <li><span class="check">âœ“</span> Custom styles</li>
                <li><span class="check">âœ“</span> Export to text, mail, URL etc</li>
                <li><span class="check">âœ“</span> Store and organize your analyses</li>
            </ul>
            <button class="plan-cta-gradient featured" onclick="event.preventDefault(); startDirectCheckout('yearly')">
                <span>â†’</span>
                Try 3 Days Free
            </button>
            <div class="secure-payment">
                <span>ğŸ”’</span>
                Secure payment via Paddle
            </div>
        </div>
    </div>
    
    <p class="pricing-note">
        <span>ğŸ’³</span> No charges for 3 days â€¢ Cancel anytime â€¢ Card required to prevent abuse
    </p>
</section>

    <!-- Trust Section -->
    <div class="trust-section">
        <p class="trust-text">
            Trusted by +10,000 happy users â­â­â­â­â­
        </p>
    </div>

    <!-- Social Proof Again -->
    <div class="social-proof">
        <span>Medium</span>
        <span>INDIE HACKERS</span>
        <span>Foundr</span>
        <span>Scoop.it!</span>
    </div>

    <!-- Final Testimonials -->
    <section class="testimonials-section">
        <div class="testimonials-grid">
            <div class="testimonial-card">
                <p class="testimonial-text">
                    "A perfect tool to work in different ways, if it's scalping, day trading, 
                    swing trading - I love it!"
                </p>
                <div class="testimonial-footer">
                    <img src="https://via.placeholder.com/40" alt="Author">
                    <span>- Alex Johnson, reviewed on Trustpilot</span>
                </div>
            </div>
            
            <div class="testimonial-card">
                <p class="testimonial-text">
                    "Been using it for the last 2 months. Super easy. Saves me 5 hours 
                    every week minimum."
                </p>
                <div class="testimonial-footer">
                    <img src="https://via.placeholder.com/40" alt="Author">
                    <span>- Maria Garcia, Entrepreneur</span>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section" id="faq">
        <p class="section-title">F.A.Q</p>
        
        <div class="faq-container">
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    Is there a mobile app?
                    <span class="faq-icon">âŒ„</span>
                </div>
                <div class="faq-answer">
                    Yes! ChartMaster is available on iOS and Android. You can analyze charts on the go, 
                    sync your analyses across devices, and access your trading insights from anywhere.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    How accurate is the chart analysis?
                    <span class="faq-icon">âŒ„</span>
                </div>
                <div class="faq-answer">
                    Our AI achieves over 99% accuracy in pattern recognition. The analysis is based on 
                    millions of historical chart data points and is continuously improved. Of course, 
                    you should always use your own judgment in trading decisions.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    Can I use ChartMaster in different languages?
                    <span class="faq-icon">âŒ„</span>
                </div>
                <div class="faq-answer">
                    Yes! ChartMaster supports over 50 languages. The AI can analyze charts with annotations 
                    in any language and output results in your preferred language.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    Can I upload my own trading strategies?
                    <span class="faq-icon">âŒ„</span>
                </div>
                <div class="faq-answer">
                    Absolutely! You can define your own trading strategies and rules. The AI will consider 
                    these when analyzing charts and provide personalized recommendations based on your strategy.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    Can I edit the analysis once it's generated?
                    <span class="faq-icon">âŒ„</span>
                </div>
                <div class="faq-answer">
                    Yes, all analyses can be edited after creation. You can add, remove, or modify text 
                    before exporting or sharing the analysis with others.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    Do I need an internet connection to use ChartMaster?
                    <span class="faq-icon">âŒ„</span>
                </div>
                <div class="faq-answer">
                    An internet connection is required for AI analysis. However, you can view and edit 
                    your saved analyses offline. The app will automatically sync when you're back online.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    What about privacy?
                    <span class="faq-icon">âŒ„</span>
                </div>
                <div class="faq-answer">
                    Your data is secure with us. We use end-to-end encryption for all your charts and 
                    analyses. We never sell your data to third parties and you maintain full control 
                    over your content.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    How can I contact support if I have questions or need help?
                    <span class="faq-icon">âŒ„</span>
                </div>
                <div class="faq-answer">
                    Our support team is available 24/7. You can reach us at support@chartmaster-ai.com 
                    or use the live chat in the app. We typically respond within 2 hours.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    How can I cancel my subscription?
                    <span class="faq-icon">âŒ„</span>
                </div>
                <div class="faq-answer">
                    You can cancel your subscription anytime in the settings. There are no cancellation 
                    fees or hidden charges. After cancellation, you'll still have access until the end 
                    of your billing period.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    How long is the discount valid when I subscribe?
                    <span class="faq-icon">âŒ„</span>
                </div>
                <div class="faq-answer">
                    The current pricing is an introductory offer for new members who sign up now. 
                    Once you subscribe, your price remains the same as long as you keep your 
                    subscription active.
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">ChartMaster AI</div>
            <div class="footer-links">
                <a href="/privacy" class="footer-link">Privacy</a>
                <a href="/terms" class="footer-link">Terms</a>
                <a href="/support" class="footer-link">Support</a>
                <a href="/api" class="footer-link">API</a>
                <a href="/blog" class="footer-link">Blog</a>
            </div>
            <div class="footer-copyright">
                Â© 2024 ChartMaster AI. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Upgrade Modal -->
    <div id="upgradeModal" class="upgrade-modal" style="display: none;">
        <div class="modal-overlay" onclick="closeUpgradeModal()"></div>
        <div class="modal-content">
            <button class="modal-close" onclick="closeUpgradeModal()">Ã—</button>
            
            <h2 class="modal-title">Unlock ChartMaster Plus</h2>
            <p class="modal-subtitle">Get unlimited ChartMaster</p>
            
            <div class="modal-features">
                <div class="feature-item">
                    <div class="feature-icon-circle">â™¾ï¸</div>
                    <div class="feature-content">
                        <h3>Unlimited Analyses</h3>
                        <p>Create as many chart analyses as you want, and get up to 100 charts analyzed per day.</p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-icon-circle">ğŸ§ </div>
                    <div class="feature-content">
                        <h3>Improved AI Models</h3>
                        <p>Unlock advanced AI models, create your own trading strategies and more!.</p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-icon-circle">ğŸ“Š</div>
                    <div class="feature-content">
                        <h3>Multiple Chart Upload</h3>
                        <p>Analyze multiple charts at once. All formats supported!</p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-icon-circle">ğŸ·ï¸</div>
                    <div class="feature-content">
                        <h3>Organize Your Analyses</h3>
                        <p>Sort and filter your analyses with ease by adding custom tags.</p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-icon-circle">ğŸ”—</div>
                    <div class="feature-content">
                        <h3>Integrations</h3>
                        <p>Connect ChartMaster & Zapier to send your analyses anywhere you want!</p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-icon-circle">ğŸ’¬</div>
                    <div class="feature-content">
                        <h3>Trading Alerts</h3>
                        <p>Get real-time alerts when patterns are detected on your watched charts!</p>
                    </div>
                </div>
            </div>
            
            <button class="modal-cta-btn" onclick="showPricingModal()">
                <span>âœ¨</span> Get ChartMaster +
            </button>
            
            <p class="modal-trust">
                <span>ğŸ›¡ï¸</span> Trusted by +10,000 happy traders
            </p>
        </div>
    </div>

    <!-- Pricing Modal -->
    <div id="pricingModal" class="pricing-modal" style="display: none;">
        <div class="modal-overlay" onclick="closePricingModal()"></div>
        <div class="pricing-modal-content">
            <button class="modal-close" onclick="closePricingModal()">Ã—</button>
            
            <h2 class="pricing-modal-title">Choose your plan</h2>
            
            <div class="pricing-options">
                <!-- Standard Plans -->
                <div class="pricing-option-group">
                    <h3 class="plan-group-title">ChartMaster AI</h3>
                    
                    <div class="pricing-option featured">
                        <div class="save-badge">â˜… Save 16%</div>
                        <div class="pricing-option-content">
                            <div class="pricing-radio">
                                <input type="radio" id="yearly" name="plan" value="yearly" checked>
                                <label for="yearly">
                                    <div class="price-info">
                                        <span class="price">$197 / year</span>
                                        <span class="price-detail">= $16/month, billed annually</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pricing-option">
                        <div class="pricing-option-content">
                            <div class="pricing-radio">
                                <input type="radio" id="monthly" name="plan" value="monthly">
                                <label for="monthly">
                                    <div class="price-info">
                                        <span class="price">$19.97 / month</span>
                                        <span class="price-detail">= $19.97/month billed monthly</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Professional Plans -->
                <div class="pricing-option-group">
                    <h3 class="plan-group-title">ChartMaster AI Professional Pro</h3>
                    
                    <div class="pricing-option featured-pro">
                        <div class="save-badge">â˜… Save 16%</div>
                        <div class="pricing-option-content">
                            <div class="pricing-radio">
                                <input type="radio" id="yearly-pro" name="plan" value="yearly-pro">
                                <label for="yearly-pro">
                                    <div class="price-info">
                                        <span class="price">$394 / year</span>
                                        <span class="price-detail">= $32/month, billed annually</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pricing-option">
                        <div class="pricing-option-content">
                            <div class="pricing-radio">
                                <input type="radio" id="monthly-pro" name="plan" value="monthly-pro">
                                <label for="monthly-pro">
                                    <div class="price-info">
                                        <span class="price">$39.94 / month</span>
                                        <span class="price-detail">= $39.94/month billed monthly</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="pricing-modal-footer">
                <div class="trust-logos">
                    <span class="trust-logo">Medium</span>
                    <span class="trust-logo">INDIE HACKERS</span>
                    <span class="trust-logo">Foundr</span>
                </div>
                
                <div class="trust-rating">
                    Trusted by +10,000 happy users â­â­â­â­â­
                </div>
                
                <button class="start-trial-btn" onclick="event.preventDefault(); startDirectTrialFromModal()">
                    <span>âœ¨</span> Start Free Trial
                </button>
                
                <p class="cancel-text">ğŸ”’ Cancel anytime</p>
            </div>
        </div>
    </div>

<!-- JavaScript Files -->
<script src="js/main.js"></script>
<script src="js/animations.js"></script>
<script src="js/interactions.js"></script>

<script>
// Initialize Paddle
let paddleInitialized = false;
function initializePaddle() {
    if (typeof Paddle !== 'undefined' && !paddleInitialized) {
        Paddle.Environment.set('sandbox');
        Paddle.Initialize({ 
            token: 'test_2e85d4afc240560722cc04b5317',
            eventCallback: function(data) {
                console.log('Paddle Event:', data);
            }
        });
        paddleInitialized = true;
        console.log('Paddle initialized successfully');
    }
}

// Warte bis Paddle geladen ist
if (typeof Paddle !== 'undefined') {
    initializePaddle();
} else {
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(initializePaddle, 1000);
    });
}

// Prevent double clicks
let isProcessingCheckout = false;

// Paddle Checkout mit Paddle.js Ã¶ffnen
async function openPaddleCheckout(plan) {
    if (!paddleInitialized) {
        alert('Paddle wird noch geladen, bitte versuchen Sie es in wenigen Sekunden erneut.');
        initializePaddle();
        return;
    }
    
    if (isProcessingCheckout) {
        console.log('Checkout already in progress');
        return;
    }
    
    isProcessingCheckout = true;
    
    const btn = event.target.closest('button');
    if (!btn) {
        isProcessingCheckout = false;
        return;
    }
    
    const originalContent = btn.innerHTML;
    btn.disabled = true;
    btn.innerHTML = '<span>â³</span> Lade...';
    
    try {
        // Product mapping
        const PADDLE_PRODUCTS = {
            'monthly': 'pro_01jxtzxnac66848hqjhwy93cfv',
            'yearly': 'pro_01jxtzwdk46yknxdjzdrt7wfg1',
            'monthly-pro': 'pro_01jxtzycder9tphs7kxsczvydf',
            'yearly-pro': 'pro_01jxtzyvghphnpg1qpxxmfyf1m'
        };
        
        const productId = PADDLE_PRODUCTS[plan];
        
        if (!productId) {
            throw new Error('Invalid plan selected');
        }
        
        // Ã–ffne Paddle Checkout
        Paddle.Checkout.open({
            product: productId,
            vendorId: 21659,
            success: (data) => {
                console.log('Checkout successful:', data);
                window.location.href = '/welcome?session_id=' + data.checkout.id;
            },
            closeCallback: () => {
                console.log('Checkout closed');
                btn.disabled = false;
                btn.innerHTML = originalContent;
                isProcessingCheckout = false;
            }
        });
        
    } catch (error) {
        console.error('Error:', error);
        alert('Fehler beim Ã–ffnen des Zahlungsformulars: ' + error.message);
        btn.disabled = false;
        btn.innerHTML = originalContent;
        isProcessingCheckout = false;
    }
}

// Wrapper fÃ¼r alte Funktion
async function startDirectCheckout(plan) {
    openPaddleCheckout(plan);
}

// Start trial from pricing modal
async function startDirectTrialFromModal() {
    const selectedPlan = document.querySelector('input[name="plan"]:checked').value;
    closePricingModal();
    openPaddleCheckout(selectedPlan);
}

// Show/Hide Upgrade Modal
function showUpgradeModal() {
    const modal = document.getElementById('upgradeModal');
    if (modal) {
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }
}

function closeUpgradeModal() {
    const modal = document.getElementById('upgradeModal');
    if (modal) {
        modal.style.display = 'none';
        document.body.style.overflow = '';
    }
}

// Show/Hide Pricing Modal
function showPricingModal() {
    closeUpgradeModal();
    const modal = document.getElementById('pricingModal');
    if (modal) {
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }
}

function closePricingModal() {
    const modal = document.getElementById('pricingModal');
    if (modal) {
        modal.style.display = 'none';
        document.body.style.overflow = '';
    }
}

// Toggle FAQ items
function toggleFAQ(element) {
    const faqItem = element.parentElement;
    const wasActive = faqItem.classList.contains('active');
    
    document.querySelectorAll('.faq-item').forEach(item => {
        item.classList.remove('active');
    });
    
    if (!wasActive) {
        faqItem.classList.add('active');
    }
}

// Toggle Step items
function toggleStep(element) {
    const wasActive = element.classList.contains('active');
    
    document.querySelectorAll('.step').forEach(step => {
        if (step !== element) {
            step.classList.remove('active');
        }
    });
    
    if (!wasActive) {
        element.classList.add('active');
    } else {
        element.classList.remove('active');
    }
}

// Initialize on DOM load
document.addEventListener('DOMContentLoaded', function() {
    console.log('ChartMaster AI with Paddle loaded');
    isProcessingCheckout = false;
});

// Close modals on ESC key
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        closeUpgradeModal();
        closePricingModal();
    }
});

// ENHANCED DEMO FUNCTIONS - Updated to match dashboard
// Parse analysis response with better error handling
function parseAnalysisResponse(text) {
    try {
        // Try to extract JSON from the response
        const jsonMatch = text.match(/\{[\s\S]*\}/);
        const jsonText = jsonMatch ? jsonMatch[0] : text;
        
        const parsed = JSON.parse(jsonText);
        
        // Validate and sanitize fields
        return {
            sentiment: ['bullish', 'bearish', 'neutral'].includes(parsed.sentiment) 
                ? parsed.sentiment 
                : 'neutral',
            confidence: typeof parsed.confidence === 'number' 
                ? Math.max(0, Math.min(100, parsed.confidence))
                : 50,
            patterns: Array.isArray(parsed.patterns) 
                ? parsed.patterns.filter(p => typeof p === 'string')
                : [],
            recommendation: typeof parsed.recommendation === 'string' 
                ? parsed.recommendation 
                : 'No recommendation available',
            analysis: typeof parsed.analysis === 'string' 
                ? parsed.analysis 
                : 'No detailed analysis available',
            support: Array.isArray(parsed.support) ? parsed.support : [],
            resistance: Array.isArray(parsed.resistance) ? parsed.resistance : [],
            entry: parsed.entry || null,
            stopLoss: parsed.stopLoss || null,
            takeProfit: Array.isArray(parsed.takeProfit) ? parsed.takeProfit : []
        };
    } catch (error) {
        console.error('JSON parsing error:', error);
        return {
            sentiment: 'neutral',
            confidence: 50,
            patterns: [],
            recommendation: 'Unable to provide recommendation due to analysis error',
            analysis: `Error analyzing chart: ${text}`,
            support: [],
            resistance: []
        };
    }
}

// Enhanced analyzeChart function to match dashboard
async function analyzeChart() {
    // Check if user has remaining scans
    if (!canUserScan()) {
        showUpgradeModal();
        return;
    }
    
    if (!window.chartImageData) {
        alert('Please upload a chart first');
        return;
    }
    
    // Hide all states
    document.getElementById('demoContent').style.display = 'none';
    document.getElementById('chartInfoInputs').style.display = 'none';
    
    // Show loading state
    document.getElementById('loadingState').style.display = 'block';
    
    // Start loading messages
    loadingMessageIndex = 0;
    updateLoadingMessage();
    loadingInterval = setInterval(updateLoadingMessage, 2000);
    
    try {
        // Get optional inputs including new style selector
        const symbol = document.getElementById('symbolInput').value;
        const timeframe = document.getElementById('timeframeInput').value;
        const notes = document.getElementById('notesInput').value;
        const style = document.getElementById('analysisStyleInput').value;
        
        const stylePrompts = {
            'technical': 'Provide comprehensive technical analysis',
            'price-action': 'Focus on price action and market structure',
            'elliott-wave': 'Apply Elliott Wave theory',
            'fibonacci': 'Include Fibonacci retracement and extension levels',
            'signal': 'Generate clear trading signals with entry, stop-loss, and take-profit'
        };
        
        const prompt = `You are a professional technical analyst. Analyze the trading chart and respond in this exact JSON format:

{
  "sentiment": "bullish" or "bearish" or "neutral",
  "confidence": <number 0-100>,
  "recommendation": "<clear trading recommendation>",
  "analysis": "<detailed technical analysis>",
  "patterns": ["<pattern1>", "<pattern2>", ...],
  "support": [<price1>, <price2>, ...],
  "resistance": [<price1>, <price2>, ...],
  "entry": <suggested entry price or null>,
  "stopLoss": <stop loss price or null>,
  "takeProfit": [<TP1>, <TP2>, ...]
}

Analysis style: ${stylePrompts[style] || stylePrompts['technical']}
${symbol ? `Symbol: ${symbol}` : ''}
${timeframe ? `Timeframe: ${timeframe}` : ''}
${notes ? `Additional notes: ${notes}` : ''}

Be specific with price levels when visible. If you cannot determine exact prices, provide relative levels or state "Unable to determine exact levels from chart".`;

        // Make actual OpenAI API call
        const response = await fetch('https://api.openai.com/v1/chat/completions', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': ``
            },
            body: JSON.stringify({
                model: "gpt-4o",
                messages: [{
                    role: "user",
                    content: [
                        { type: "text", text: prompt },
                        { 
                            type: "image_url", 
                            image_url: { 
                                url: window.chartImageData,
                                detail: "high"
                            } 
                        }
                    ]
                }],
                max_tokens: 1500,
                temperature: 0.3
            })
        });
        
        if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.error?.message || 'API request failed');
        }
        
        const data = await response.json();
        const analysisText = data.choices[0]?.message?.content;
        
        if (!analysisText) {
            throw new Error('No response received from AI');
        }
        
        const analysis = parseAnalysisResponse(analysisText);
        
        // Show results
        displayAnalysisResults(analysis);
        
        // Update scan count after successful analysis
        updateScanCount();
        updateScanCounter();
        
    } catch (error) {
        console.error('Analysis error:', error);
        alert('Failed to analyze chart: ' + error.message);
        resetDemo();
    } finally {
        clearInterval(loadingInterval);
    }
}

// Enhanced display results to show key levels
function displayAnalysisResults(analysis) {
    // Hide loading, show results
    document.getElementById('loadingState').style.display = 'none';
    document.getElementById('resultState').style.display = 'block';
    
    // Update sentiment
    const sentimentIcon = document.getElementById('sentimentIcon');
    sentimentIcon.textContent = analysis.sentiment === 'bullish' ? 'ğŸ“ˆ' : 
                               analysis.sentiment === 'bearish' ? 'ğŸ“‰' : 'â¡ï¸';
    
    // Update sentiment text
    const sentimentText = document.getElementById('sentimentText');
    sentimentText.textContent = analysis.sentiment.toUpperCase();
    sentimentText.className = `sentiment-value ${analysis.sentiment}`;
    
    // Update confidence
    document.getElementById('confidenceText').textContent = `${analysis.confidence}% Confidence`;
    document.getElementById('confidenceFill').style.width = `${analysis.confidence}%`;
    
    // Update recommendation with trade levels if available
    let recommendationHTML = `<p>${analysis.recommendation}</p>`;
    if (analysis.entry || analysis.stopLoss || (analysis.takeProfit && analysis.takeProfit.length > 0)) {
        recommendationHTML += '<div class="trade-levels-demo">';
        if (analysis.entry) {
            recommendationHTML += `<div class="level-item"><span class="level-label">Entry:</span> <span class="level-value">${analysis.entry}</span></div>`;
        }
        if (analysis.stopLoss) {
            recommendationHTML += `<div class="level-item"><span class="level-label">Stop Loss:</span> <span class="level-value stop-loss">${analysis.stopLoss}</span></div>`;
        }
        if (analysis.takeProfit && analysis.takeProfit.length > 0) {
            recommendationHTML += `<div class="level-item"><span class="level-label">Take Profit:</span> <span class="level-value take-profit">${analysis.takeProfit.join(', ')}</span></div>`;
        }
        recommendationHTML += '</div>';
    }
    document.getElementById('recommendationText').innerHTML = recommendationHTML;
    
    // Update analysis
    document.getElementById('analysisText').textContent = analysis.analysis;
    
    // Update patterns
    if (analysis.patterns && analysis.patterns.length > 0) {
        const patternsSection = document.getElementById('patternsSection');
        const patternsList = document.getElementById('patternsList');
        
        patternsSection.style.display = 'block';
        patternsList.innerHTML = analysis.patterns
            .map(pattern => `<div class="pattern-chip">${pattern}</div>`)
            .join('');
    } else {
        document.getElementById('patternsSection').style.display = 'none';
    }
    
    // Update key levels (NEW)
    if ((analysis.support && analysis.support.length > 0) || (analysis.resistance && analysis.resistance.length > 0)) {
        const levelsSection = document.getElementById('levelsSection');
        const keyLevelsList = document.getElementById('keyLevelsList');
        
        levelsSection.style.display = 'block';
        
        let levelsHTML = '';
        if (analysis.support && analysis.support.length > 0) {
            levelsHTML += '<div class="level-group-demo"><h6>Support:</h6>';
            levelsHTML += analysis.support.map(level => `<span class="level-tag support">${level}</span>`).join('');
            levelsHTML += '</div>';
        }
        if (analysis.resistance && analysis.resistance.length > 0) {
            levelsHTML += '<div class="level-group-demo"><h6>Resistance:</h6>';
            levelsHTML += analysis.resistance.map(level => `<span class="level-tag resistance">${level}</span>`).join('');
            levelsHTML += '</div>';
        }
        
        keyLevelsList.innerHTML = levelsHTML;
    } else {
        document.getElementById('levelsSection').style.display = 'none';
    }
}
</script>

<!-- Additional CSS for new elements -->
<style>
/* Demo Trade Levels */
.trade-levels-demo {
    display: flex;
    gap: 20px;
    margin-top: 12px;
    padding: 12px;
    background: rgba(59, 130, 246, 0.05);
    border-radius: 8px;
    font-size: 14px;
}

.level-item {
    display: flex;
    gap: 8px;
}

.level-label {
    color: #6b7280;
    font-size: 13px;
}

.level-value {
    font-weight: 600;
    color: #111827;
}

.level-value.stop-loss {
    color: #ef4444;
}

.level-value.take-profit {
    color: #10b981;
}

/* Key Levels Container */
.key-levels-container {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.level-group-demo {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.level-group-demo h6 {
    font-size: 13px;
    font-weight: 600;
    color: #6b7280;
    margin: 0;
}

.level-tag {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 500;
    margin-right: 6px;
}

.level-tag.support {
    background: #dcfce7;
    color: #15803d;
}

.level-tag.resistance {
    background: #fee2e2;
    color: #991b1b;
}

/* Analysis Style Input */
#analysisStyleInput {
    width: 100%;
    padding: 12px 16px;
    margin-top: 12px;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    font-size: 14px;
    background: white;
    cursor: pointer;
}

#analysisStyleInput:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Dev Mode Indicator */
.scan-counter-inline.dev-mode {
    background: #8b5cf6;
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
}

.scan-counter-inline.warning .counter-number {
    color: #f59e0b;
}

.scan-counter-inline.exhausted .counter-number {
    color: #ef4444;
}
</style>

<script>
// Debug Paddle
setTimeout(() => {
    console.log('=== PADDLE DEBUG ===');
    console.log('Paddle loaded?', typeof Paddle !== 'undefined');
    console.log('Paddle object:', window.Paddle);
    console.log('paddleInitialized?', window.paddleInitialized);
    
    // Test Paddle direkt
    if (typeof Paddle !== 'undefined') {
        console.log('Paddle.Checkout available?', Paddle.Checkout);
        console.log('Paddle Environment:', Paddle.Environment);
    }
}, 3000);
</script>

</body>
</html>